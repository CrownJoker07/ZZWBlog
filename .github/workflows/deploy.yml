name: Deploy Hugo
on:
  push:
    branches: [main] # è§¦å‘åˆ†æ”¯ï¼ˆæºç åˆ†æ”¯ï¼‰
  workflow_dispatch:  # ğŸ‘ˆ æ‰‹åŠ¨è§¦å‘ï¼ˆå…³é”®ï¼‰
jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: æ‹‰å–ä»£ç 
        uses: actions/checkout@v4
        with:
          submodules: true # å¦‚æœç”¨äº†ä¸»é¢˜å­æ¨¡å—å¿…åŠ 

      - name: å®‰è£… Hugo
        run: |
          sudo apt-get update
          sudo apt-get install -y hugo

      - name: ç”Ÿæˆé™æ€æ–‡ä»¶
        run: hugo --minify

      - name: éƒ¨ç½²åˆ° GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          # ä»é»˜è®¤çš„ GITHUB_TOKEN æ”¹ä¸ºè‡ªå·±çš„ Personal Token
          personal_token: ${{ secrets.PERSONAL_TOKEN }}
          # æŒ‡å®šç›®æ ‡ä»“åº“ï¼ˆæ ¼å¼ï¼šç”¨æˆ·å/ä»“åº“åï¼‰
          external_repository: CrownJoker07/CrownJoker07.github.io
          publish_dir: ./public
          # å¼ºåˆ¶ç›®æ ‡åˆ†æ”¯ä¸º main
          publish_branch: main
          # æ·»åŠ ä»¥ä¸‹å‚æ•°è§£å†³å†å²æäº¤å†²çª
          force_orphan: true
