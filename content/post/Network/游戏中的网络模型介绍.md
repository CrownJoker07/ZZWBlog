---
title: æ¸¸æˆä¸­çš„ç½‘ç»œæ¨¡å‹ä»‹ç»
date: 2025-05-25 18:32:00+0800
categories:
    - Network
---

> èº«ä¸ºä¸€åæ¸¸æˆå®¢æˆ·ç«¯ã€å·¥ä½œä¸‰å¹´ä»¥æ¥é™¤äº†ä½¿ç”¨è¿‡ç½‘ç»œè¯·æ±‚ï¼Œå®Œå…¨æ²¡æœ‰ä½¿ç”¨è¿‡ç½‘ç»œè¿æ¥ï¼Œæœ€è¿‘ä½¿ç”¨Godotå°è¯•å±€åŸŸç½‘è”æœºï¼Œå› æ­¤ç ”ç©¶ä¸€ä¸‹ç½‘ç»œæ¨¡å‹

ä»¥ä¸‹æ˜¯æ‚¨æä¾›çš„æ–‡ç« çš„é€æ®µè¯¦ç»†è§£æï¼Œç»“åˆæŠ€æœ¯è¦ç‚¹å’Œå®é™…åº”ç”¨åœºæ™¯ï¼š

---

### **ä¸€ã€P2Pé”æ­¥æ¨¡å‹ï¼ˆPeer-to-Peer Lockstepï¼‰**
#### **æ ¸å¿ƒæœºåˆ¶**
- **å·¥ä½œåŸç†**ï¼šæ‰€æœ‰ç©å®¶è®¾å¤‡ï¼ˆèŠ‚ç‚¹ï¼‰ç›´æ¥äº’è”ï¼Œæ¯å¸§äº¤æ¢æ“ä½œæŒ‡ä»¤ï¼ˆå¦‚ç§»åŠ¨ã€æ”»å‡»ï¼‰ã€‚æ‰€æœ‰è®¾å¤‡ä»ç›¸åŒåˆå§‹çŠ¶æ€å‡ºå‘ï¼Œé€šè¿‡å®Œå…¨ç›¸åŒçš„æŒ‡ä»¤åºåˆ—å’Œé€»è¾‘è®¡ç®—æ¨è¿›æ¸¸æˆçŠ¶æ€ã€‚
- **ç¤ºä¾‹**ï¼šã€Šå¸å›½æ—¶ä»£ã€‹ä¸­ï¼Œæ¯ä¸ªç©å®¶çš„è¾“å…¥ï¼ˆå¦‚å»ºé€ å»ºç­‘ï¼‰ä¼šè¢«å¹¿æ’­ç»™å…¶ä»–ç©å®¶ï¼Œæ‰€æœ‰è®¾å¤‡ç‹¬ç«‹è®¡ç®—æ•´ä¸ªæ¸¸æˆä¸–ç•Œçš„çŠ¶æ€ã€‚

#### **ä¼˜ç‚¹**
- **ä½å¸¦å®½éœ€æ±‚**ï¼šä»…ä¼ è¾“æ“ä½œæŒ‡ä»¤è€Œéå®Œæ•´çŠ¶æ€ï¼Œé€‚åˆå•ä½æ•°é‡åºå¤§çš„RTSæ¸¸æˆï¼ˆå¦‚æ•°åƒä¸ªå•ä½ï¼‰ã€‚

#### **ç¼ºç‚¹**
1. **ç¡®å®šæ€§éš¾é¢˜**  
   - **é—®é¢˜**ï¼šä¸åŒè®¾å¤‡çš„æµ®ç‚¹è¿ç®—ã€æŒ‡ä»¤é¡ºåºç­‰å¾®å°å·®å¼‚å¯èƒ½å¯¼è‡´çŠ¶æ€ä¸åŒæ­¥ï¼ˆå¦‚å•ä½è·¯å¾„è®¡ç®—è¯¯å·®ï¼‰ã€‚  
   - **ç°å®æ¡ˆä¾‹**ï¼šæŸå•ä½åœ¨Aè®¾å¤‡ä¸Šå› è®¡ç®—é¡ºåºæ—©0.1ç§’åˆ°è¾¾æˆ˜åœºï¼Œè€Œåœ¨Bè®¾å¤‡ä¸Šæ™šåˆ°ï¼Œå¯¼è‡´æˆ˜æœ¯ç»“æœæˆªç„¶ä¸åŒã€‚  
   - **è§£å†³æ–¹æ¡ˆ**ï¼šä¸¥æ ¼é™åˆ¶éç¡®å®šæ€§æ“ä½œï¼ˆå¦‚ç¦ç”¨æµ®ç‚¹è¿ç®—ï¼Œä½¿ç”¨å®šç‚¹æ•°ï¼‰ï¼Œæˆ–é€šè¿‡å®šæœŸåŒæ­¥æ ¡éªŒçŠ¶æ€ã€‚

2. **å»¶è¿Ÿç´¯ç§¯**  
   - **é—®é¢˜**ï¼šæ‰€æœ‰ç©å®¶å¿…é¡»ç­‰å¾…æœ€æ…¢è®¾å¤‡çš„è¾“å…¥ï¼Œå¯¼è‡´å…¨ä½“å»¶è¿Ÿç­‰äºæœ€å·®ç©å®¶çš„ç½‘ç»œå»¶è¿Ÿã€‚  
   - **ç¼“è§£æ‰‹æ®µ**ï¼šRTSæ¸¸æˆå¸¸é€šè¿‡â€œå»¶è¿Ÿè¡¥å¿â€ï¼ˆå¦‚é¢„åˆ¤å•ä½åŠ¨ä½œï¼‰å’Œè§†è§‰æ•ˆæœï¼ˆå³æ—¶éŸ³æ•ˆï¼‰æ©ç›–å»¶è¿Ÿã€‚

3. **åˆå§‹çŠ¶æ€åŒæ­¥å›°éš¾**  
   - **é—®é¢˜**ï¼šä¸­é€”åŠ å…¥æ¸¸æˆçš„ç©å®¶éœ€è·å–å®Œæ•´çš„åˆå§‹çŠ¶æ€ï¼Œè¿™åœ¨å®æ—¶å¯¹æˆ˜ä¸­å‡ ä¹ä¸å¯è¡Œã€‚  
   - **ä¾‹å¤–æƒ…å†µ**ï¼šéƒ¨åˆ†æ¸¸æˆï¼ˆå¦‚ã€Šæ˜Ÿé™…äº‰éœ¸ã€‹ï¼‰å…è®¸ç©å®¶ä¸­é€”åŠ å…¥ï¼Œä½†éœ€å¤æ‚çš„çŠ¶æ€å¿«ç…§å’Œå›æ”¾æœºåˆ¶ã€‚

---

### **äºŒã€å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å‹ï¼ˆClient-Serverï¼‰**
#### **æ ¸å¿ƒæœºåˆ¶**
- **æ¶æ„å˜é©**ï¼šæ‰€æœ‰ç©å®¶ä½œä¸ºå®¢æˆ·ç«¯è¿æ¥ä¸­å¤®æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è´Ÿè´£è®¡ç®—æƒå¨æ¸¸æˆçŠ¶æ€å¹¶åŒæ­¥ç»™å®¢æˆ·ç«¯ã€‚  
- **ç¤ºä¾‹**ï¼šã€ŠQuakeã€‹ä¸­ï¼Œå®¢æˆ·ç«¯ä»…å‘é€æŒ‰é”®è¾“å…¥ï¼ŒæœåŠ¡å™¨è®¡ç®—è§’è‰²ç§»åŠ¨å’Œç¢°æ’ï¼Œå®¢æˆ·ç«¯ä»…æ¸²æŸ“æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€ã€‚

#### **ä¼˜ç‚¹**
- **æ¶ˆé™¤P2På»¶è¿Ÿç“¶é¢ˆ**ï¼šå»¶è¿Ÿå–å†³äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„ç›´æ¥è¿æ¥ï¼Œè€Œéå…¶ä»–ç©å®¶çš„å»¶è¿Ÿã€‚  
- **åŠ¨æ€åŠ å…¥æ”¯æŒ**ï¼šæ–°ç©å®¶å¯éšæ—¶åŠ å…¥ï¼Œæ— éœ€åŒæ­¥å®Œæ•´åˆå§‹çŠ¶æ€ï¼ˆåªéœ€å½“å‰çŠ¶æ€å¿«ç…§ï¼‰ã€‚  
- **é˜²ä½œå¼Šèƒ½åŠ›**ï¼šæœåŠ¡å™¨éªŒè¯æ‰€æœ‰æ“ä½œåˆæ³•æ€§ï¼ˆå¦‚ç§»åŠ¨é€Ÿåº¦æ˜¯å¦åˆæ³•ï¼‰ï¼Œå‡å°‘å¤–æŒ‚å¯èƒ½æ€§ã€‚

#### **ç¼ºç‚¹**
- **æœåŠ¡å™¨æˆä¸ºå•ç‚¹æ•…éšœ**ï¼šéœ€é«˜å¯ç”¨æ€§æ¶æ„ï¼ˆå¦‚ã€Šè‹±é›„è”ç›Ÿã€‹çš„å¤šåŒºåŸŸæœåŠ¡å™¨é›†ç¾¤ï¼‰ã€‚  
- **å¸¦å®½å‹åŠ›**ï¼šæœåŠ¡å™¨éœ€å‘å¤šä¸ªå®¢æˆ·ç«¯å¹¿æ’­çŠ¶æ€æ›´æ–°ï¼Œç©å®¶æ•°é‡å¢åŠ æ—¶å¸¦å®½æ¶ˆè€—å‰§å¢ã€‚  
- **å®¢æˆ·ç«¯å»¶è¿Ÿæ„ŸçŸ¥**ï¼šç©å®¶è¾“å…¥éœ€ç­‰å¾…æœåŠ¡å™¨å“åº”ï¼Œå¯¼è‡´æ“ä½œåé¦ˆå»¶è¿Ÿï¼ˆå¦‚æŒ‰ä¸‹å°„å‡»é”®åéœ€ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤å‘½ä¸­ï¼‰ã€‚

---

### **ä¸‰ã€å®¢æˆ·ç«¯é¢„æµ‹ï¼ˆClient-Side Predictionï¼‰**
#### **æ ¸å¿ƒæ€æƒ³**
- **æœ¬åœ°æ¨¡æ‹Ÿ**ï¼šå®¢æˆ·ç«¯åœ¨å‘é€è¾“å…¥åç«‹å³æœ¬åœ°æ¨¡æ‹Ÿè§’è‰²è¿åŠ¨ï¼ˆå¦‚å‘å‰ç§»åŠ¨ï¼‰ï¼Œæ— éœ€ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ã€‚  
- **ç¤ºä¾‹**ï¼šåœ¨ã€Šä½¿å‘½å¬å”¤ã€‹ä¸­ï¼ŒæŒ‰ä¸‹å¼€ç«é”®åï¼Œå­å¼¹ç«‹å³ä»å±å¹•å°„å‡ºï¼Œå³ä½¿æœåŠ¡å™¨å°šæœªç¡®è®¤æ˜¯å¦å‘½ä¸­ã€‚

#### **æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ**
1. **æœåŠ¡å™¨æƒå¨æ€§ä¸çº æ­£å†²çª**  
   - **é—®é¢˜**ï¼šè‹¥å®¢æˆ·ç«¯é¢„æµ‹ä¸æœåŠ¡å™¨çŠ¶æ€ä¸ç¬¦ï¼ˆå¦‚è¢«å‡»ä¸­åä½ç½®å›æ»šï¼‰ï¼Œéœ€â€œæ— ç¼ä¿®æ­£â€ä»¥é¿å…ç”»é¢çªå…€è·³å˜ã€‚  
   - **è§£å†³æ–¹æ¡ˆ**ï¼š  
     - **çŠ¶æ€ç¼“å†²åŒºï¼ˆCircular Bufferï¼‰**ï¼šå®¢æˆ·ç«¯ä¿å­˜è¿‡å»Nå¸§çš„è¾“å…¥å’ŒçŠ¶æ€ã€‚  
     - **å›æ»šä¸é‡æ”¾**ï¼šæ”¶åˆ°æœåŠ¡å™¨çº æ­£æŒ‡ä»¤åï¼Œä¸¢å¼ƒå†²çªçš„æœªæ¥çŠ¶æ€ï¼Œä»çº æ­£ç‚¹é‡æ–°æ¨¡æ‹Ÿï¼ˆä½¿ç”¨ç¼“å†²çš„è¾“å…¥æ•°æ®ï¼‰ã€‚  
   - **ç¤ºä¾‹**ï¼šè‹¥å®¢æˆ·ç«¯é¢„æµ‹è§’è‰²ä½äºä½ç½®Aï¼Œä½†æœåŠ¡å™¨æ ¡æ­£åˆ°ä½ç½®Bï¼Œå®¢æˆ·ç«¯ä¼šâ€œå€’å¸¦â€è§’è‰²åŠ¨ä½œï¼Œä½¿å…¶çœ‹ä¼¼ä»Bè‡ªç„¶ç§»åŠ¨åˆ°å½“å‰é¢„æµ‹ä½ç½®ã€‚

2. **ä½œå¼Šé˜²æŠ¤**  
   - **æœåŠ¡å™¨æ ¡éªŒ**ï¼šå…³é”®æ“ä½œï¼ˆå¦‚ä¼¤å®³è®¡ç®—ã€ç¢°æ’æ£€æµ‹ï¼‰å¿…é¡»ç”±æœåŠ¡å™¨æ‰§è¡Œï¼Œå®¢æˆ·ç«¯ä»…ä½œä¸ºâ€œé¢„æµ‹æ˜¾ç¤ºå±‚â€ã€‚  
   - **ç¤ºä¾‹**ï¼šç©å®¶å£°ç§°å‡»ä¸­æ•Œäººï¼Œä½†æœåŠ¡å™¨ä¼šæ ¹æ®æ­¦å™¨å¼¹é“ã€ä½ç½®ç­‰æ•°æ®é‡æ–°éªŒè¯ï¼Œé˜²æ­¢â€œç©¿å¢™ç‹™æ€â€ã€‚

---

### **å››ã€æŠ€æœ¯æ¼”è¿›å¯¹æ¯”**
| æ¨¡å‹                | é€‚ç”¨åœºæ™¯       | å»¶è¿Ÿä½“éªŒ | å¸¦å®½éœ€æ±‚ | é˜²ä½œå¼Šèƒ½åŠ› | å®ç°å¤æ‚åº¦ |
|---------------------|----------------|----------|----------|------------|------------|
| **P2Pé”æ­¥**         | RTSæ¸¸æˆ        | é«˜       | ä½       | å¼±         | ä¸­ï¼ˆéœ€ä¸¥æ ¼ç¡®å®šæ€§ï¼‰ |
| **çº¯å®¢æˆ·ç«¯/æœåŠ¡å™¨** | æ—©æœŸFPSï¼ˆå¦‚Quakeï¼‰ | ä¸­       | é«˜       | å¼º         | ä½         |
| **å®¢æˆ·ç«¯é¢„æµ‹+æœåŠ¡å™¨æƒå¨** | ç°ä»£FPSï¼ˆå¦‚CODï¼‰ | ä½       | ä¸­       | å¼º         | é«˜         |

---

### **äº”ã€ç°ä»£æŠ€æœ¯æ‰©å±•**
1. **æ’å€¼ä¸å¤–æ¨ï¼ˆInterpolation & Extrapolationï¼‰**  
   - **æ’å€¼**ï¼šå¹³æ»‘è¿‡æ¸¡æœåŠ¡å™¨çŠ¶æ€ï¼ˆå¦‚è§’è‰²ç§»åŠ¨æ—¶çš„æ¸å˜åŠ¨ç”»ï¼‰ã€‚  
   - **å¤–æ¨**ï¼šé¢„æµ‹æœªæ¥çŠ¶æ€ï¼ˆå¦‚æ ¹æ®é€Ÿåº¦ä¼°ç®—è§’è‰²ä½ç½®ï¼Œç”¨äºå¿«é€Ÿå“åº”ï¼‰ã€‚

2. **å»¶è¿Ÿè¡¥å¿æŠ€æœ¯ï¼ˆLag Compensationï¼‰**  
   - **å›æ»šå°„å‡»ï¼ˆRewind & Replayï¼‰**ï¼šæœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯å»¶è¿Ÿæ—¶é—´å›æº¯çŠ¶æ€ï¼ŒéªŒè¯å°„å‡»æœ‰æ•ˆæ€§ï¼ˆå¦‚ã€ŠCS:GOã€‹çš„å‘½ä¸­åˆ¤å®šï¼‰ã€‚

3. **æ··åˆæ¶æ„**  
   - **åŒºåŸŸæœåŠ¡å™¨+è¾¹ç¼˜è®¡ç®—**ï¼šä¸ºé™ä½å»¶è¿Ÿï¼Œå°†æœåŠ¡å™¨éƒ¨ç½²åœ¨é è¿‘ç©å®¶çš„åœ°ç†ä½ç½®ï¼ˆå¦‚AWSçš„å…¨çƒåŠ é€ŸæœåŠ¡ï¼‰ã€‚

---

### **å…­ã€ç°å®æ¡ˆä¾‹åˆ†æ**
- **ã€Šæ˜Ÿé™…äº‰éœ¸ã€‹**ï¼šåšæŒP2Pé”æ­¥æ¨¡å‹ï¼Œå› å•ä½æ•°é‡åºå¤§ä¸”çŠ¶æ€åŒæ­¥æˆæœ¬è¿‡é«˜ï¼Œä½†éœ€ä¸¥æ ¼é™åˆ¶éç¡®å®šæ€§å› ç´ ï¼ˆå¦‚ç¦ç”¨æµ®ç‚¹è¿ç®—ï¼‰ã€‚  
- **ã€Šå®ˆæœ›å…ˆé”‹ã€‹**ï¼šé‡‡ç”¨å®¢æˆ·ç«¯é¢„æµ‹+æœåŠ¡å™¨æ ¡æ­£ï¼Œç»“åˆè§’è‰²åŠ¨ç”»çš„â€œåŠ¨ç”»å»¶è¿Ÿè¡¥å¿â€ï¼ˆå¦‚æå‰æ’­æ”¾å—å‡»åŠ¨ç”»ï¼Œå®é™…ä¼¤å®³ç¨åç”Ÿæ•ˆï¼‰ã€‚  
- **ã€ŠWebRTCã€‹**ï¼šç°ä»£æµè§ˆå™¨å®æ—¶é€šä¿¡æŠ€æœ¯ï¼Œå†…ç½®ç½‘ç»œæŠ–åŠ¨ç¼“å†²å’Œä¸¢åŒ…é‡ä¼ æœºåˆ¶ï¼Œé€‚ç”¨äºä½å»¶è¿Ÿå¤šäººæ¸¸æˆï¼ˆå¦‚ç½‘é¡µç«¯å°æ¸¸æˆï¼‰ã€‚

---

### **ä¸ƒã€æ€»ç»“ä¸å¯ç¤º**
1. **æ¶æ„é€‰æ‹©å–å†³äºæ¸¸æˆç±»å‹**ï¼š  
   - RTS â†’ P2Pé”æ­¥ï¼ˆä½æˆæœ¬åŒæ­¥ï¼‰  
   - FPS/MMO â†’ å®¢æˆ·ç«¯é¢„æµ‹+æœåŠ¡å™¨æƒå¨ï¼ˆå¹³è¡¡å»¶è¿Ÿä¸å®‰å…¨ï¼‰  
2. **å»¶è¿Ÿä¼˜åŒ–æ°¸æ— æ­¢å¢ƒ**ï¼šä»é”æ­¥åˆ°é¢„æµ‹ï¼Œå†åˆ°è¾¹ç¼˜è®¡ç®—ï¼ŒæŠ€æœ¯æ¼”è¿›å§‹ç»ˆå›´ç»•â€œæ›´æµç•…çš„ä½“éªŒâ€ã€‚  
3. **å®‰å…¨ä¸æ€§èƒ½çš„æƒè¡¡**ï¼šæ›´é«˜çš„å®¢æˆ·ç«¯è‡ªä¸»æƒï¼ˆå¦‚é¢„æµ‹ï¼‰éœ€æ­é…æ›´ä¸¥æ ¼çš„æœåŠ¡å™¨æ ¡éªŒï¼Œé˜²æ­¢ä½œå¼Šã€‚

> ğŸ’¡ å…³é”®ç‚¹ï¼šæ¸¸æˆç½‘ç»œç¼–ç¨‹çš„æœ¬è´¨æ˜¯åœ¨**å®æ—¶æ€§**ã€**å¸¦å®½æ•ˆç‡**å’Œ**å®‰å…¨æ€§**ä¹‹é—´å¯»æ‰¾å¹³è¡¡ï¼Œè€ŒæŠ€æœ¯æ–¹æ¡ˆçš„é€‰æ‹©æ·±åˆ»å½±å“æ¸¸æˆè®¾è®¡å’Œç©å®¶ä½“éªŒã€‚

å‚è€ƒèµ„æ–™ï¼š
1. [What Every Programmer Needs To Know About Game Networking](https://docs.godotengine.org/en/stable/tutorials/networking/introduction_to_networking.html)